<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Introducción a Backbone.js - Pablo Monterde - @pablomonterdep</title>

    <meta name="description" content="Introducción a Backbone.js">
    <meta name="author" content="Pablo Monterde">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/beige.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/default.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <style>
      .half {
        width: 50%;
      }

      ul.half {
        margin: 0;
      }

      .left {
        float: left;
      }

      .green {
        color: #17ff2e;
      }

      .directory, .directory span {
        color: #8CD0D3;
      }

      .comment, .comment span {
        color: #7F9F7F;
      }

      .new_file, .new_file span {
        color: #9BE6A3;
      }

      section img.clean-image {
        background:none;
        border:none;
        box-shadow:none
      }

    </style>
  </head>

  <body>

    <div class="reveal">

      <div class="slides">

        <section>
          <h1>Backbone.js</h1>
          <h3>Introducción</h3>
          <p>
            <small>By <a href="http://">Pablo Monterde</a> / <a href="http://twitter.com/pablomonterdep">@pablomonterdep</a></small>
          </p>
          <img class="clean-image" src="img/backbone.png">
        </section>

        <section>
          <h2>Pablo Monterde</h2>
          <ul>
            <li><a href="">PHP - javascript - actionscript3</a></li>
            <li><a href="http://www.onbile.com">Onbile</a></li>
            <li><a href="mailto:pablomonterde@gmail.com">pablomonterde@gmail.com</a></li>
            <li><a href="http://twitter.com/pablomonterdep">@pablomonterdep</a></li>
          </ul>
        </section>

        

        <section>
          <h2> Backbone.js </h2>
         
          <blockquote cite="http://backbonejs.org/">Backbone.js provee una estructura a aplicaciones que hacen uso intensivo de <strong>Javascript</strong> en el lado del cliente, proveyendo <strong>modelos</strong> clave-valor enlazables mediante <strong>eventos</strong>, <strong>colecciones</strong> con una extensa API, <strong>vistas</strong> con manejadores de eventos declarativos y conexiones a interfaces <strong>RESTful JSON</strong>.</blockquote>
        </section>

        <section>
          <h2>¿Qué es Backbone.js?</h2>
          <blockquote cite="http://backbonejs.org/">Get your truth out of the DOM</blockquote>
           <ul>
            <li>Provee estructura a tu client side app</li>
            <li>Modelos para representar datos</li>
            <li>Vistas para reflejar los model en el DOM</li>
            <li>Sincronizar datos con el server</li>
            <li>Patrón MVC - MVR</li>
            <li>Light weight <strong>4kb</strong></li>
            <li>Creado por <strong>Jeremy Ashkenas</strong>  <small>(coffeScript,underscore.js,...)</small></li>
          </ul>
        </section> 

        <section>
          <h2>Filosofía</h2>
          <ul>
            <li>Eliminar código spaghetti</li>
            <li>Estructuras de datos definidas</li>
            <li>Separar el DOM de la lógica de negocio (no imprimir tus datos en el DOM)</li>
            <li>Sincronización de datos con el servidor fácil y ordenada</li>
          </ul>
        </section>
        <section>
          <h2>Por y para qué uso Backbones.js?</h2>
          <ul>
            <li>Ayuda es escribir código limpio</li>
            <li>Compatible con plugins Jquery y otras librerias</li>
            <li>Conjunto de funciones = vidas mas fácil</li>
            <li>Flexible</li>
            <li>Muy ligero</li>
          </ul>
        </section>

        <section>
          <h2>Otras características</h2>
          <ul>
            <li>No es sustituyente</li>
            <li>Curva de aprendizaje rápida</li>
            <li>Dependencias con librerias conocidas:</li>
              <ol>json2.js</ol>
              <ol>Jquery - Zepto</ol>
              <ol>Underscore.js (hard dependency)</ol>
          </ul>
        </section>

        <section>
          <h2>Underscore.js</h2>
          <blockquote >NO TE CREES ESA FUNCION porque YA ESTÁ HECHA...</blockquote>
          <ul>
            <li>80 funciones primitivas</li>
              <ol>Collections</ol>
              <ol>Arrays</ol>
              <ol>Functions</ol>
              <ol>Objects</ol>
              <ol>Utility</ol>
            <li>+60 funciones manipulación Strings con <strong>underscoreString.js</strong></li>
          </ul>
          <pre><code contenteditable style="max-height: 600px">
  var betabeersAssitants = [
    {name:'Juan' , profession:'programmer', age:24},
    {name:'Peter' , profession:'programmer', age:31},
    {name:'Daniel' , profession:'translator', age:75}
  ];

  _.where(betabeersAssitants, {profession: 'translator',  age:75});
  => [{name:'Daniel' , profession:'translator', age:75}]
          </code></pre>
        </section>
       

        <section>
          <section>
            <h2>Proyectos desarrollados con Backbone.js</h2>
            <div class="half left">
              <p><a href="http://www.documentcloud.org/">documentcloud</a></p>
              <img src="img/opensky.png" alt="">
            </div>
            <div class="half left">
              <p><a href="http://www.usatoday.com/">usatoday</a></p>
              <img src="img/usa-today.png" alt="">
            </div>
          </section>

          <section>
            <div class="half left">
              <p><a href="http://www.linkedin.com/">LinkedIn Mobile</a></p>
              <img src="img/linkedin-mobile.png" alt="">
            </div>
            <div class="half left">
              <p><a href="http://wordpress.com/"></a>WordPress.com</p>
              <img src="img/wordpress.jpeg" alt="">
            </div>
          </section>
          
          <section>
            <h3><a href="https://bitbucket.com/"></a>bitbucket</h3>
            <img class="image" src="img/bitbucket.png" alt="">
          </section>

          <section>
            <h3><a href="https://foursquare.com/"></a>foursquare</h3>
            <img class="image" src="img/foursquare.png" alt="">
          </section>

        </section>
        <section>
          <h2>Backbone.js Components</h2>
          <img class="image" src="img/backboneFlow.png" alt="">
        </section>
        <section>

          <section>
            <h1>Events</h1>
            <ul>
              <li>Orientado a eventos</li>
              <li>Eventos como método principal de comunicación entre componentes</li>
              <li>Todo componente Backbone es capaz de <strong>emitir</strong> y <strong>capturar</strong> eventos</li>
            </ul>
          </section> 

          <section>
            <h2>Event funcions</h2>
            <ul>
              <li>on</li>
              <li>off</li>
              <li>trigger</li>
              <li>once</li>
              <li>listenTo</li>
              <li>stopListening</li>
            </ul>
          </section>

          <section>
            <h2>Catalog of Events </h2>
            <ul>
              <li>add</li>
              <li>remove</li>
              <li>reset</li>
              <li>sort</li>
              <li>change</li>
              <li>change:[attribute]</li>
              <li>destroy</li>
              <li>request</li>
              <li>sync</li>
              <li>error</li>
              <li>invalid</li>
              <li>route:[name]</li>
              <li>route</li>
              <li>all</li>
            </ul>
          </section>

          <section>
            <h2>Events mixin</h2>
            <ul>
              <li>Cualquier objeto capaz de <strong>emitir</strong> y <strong>capturar</strong> eventos</li>
            </ul>
            <pre><code contenteditable style="max-height: 600px">
var notifier = {};
var noticeboard = {};

_.extend(notifier, Backbone.Events);
_.extend(noticeboard, Backbone.Events);

noticeboard.listenTo(notifier,"alert", function(msg) {
  alert(msg);
});

notifier.trigger("alert", "Hello Betabeers");


          </code></pre>

          </section>
        </section>  

        <section>

          <section>
            <h1>Models</h1>
            <blockquote cite="http://backbonejs.org/">Models are the heart of any JavaScript application...</blockquote>
          </section>  

          <section>
            <h2>¿Qué aportan los models de Backbone?</h2>
            <ul>
              <li>Estructura de datos</li>
              <li>Validación de datos</li>
              <li>Memoria</li>
              <li>Notificación de cambios de estado</li>
              <li><strong>Sincronización</strong> con el server</li>
              <li>...</li>
            </ul>
          </section>

          <section>
            <h2>Creando un Model</h2>
             <pre><code contenteditable style="max-height: 600px">
var Talk = Backbone.Model.extend({  
    defaults: {  
      speaker: 'Default speaker',  
      topic: '' 
    },
    initialize: function(){ // Contructor },  
    notifyTopic:function(){ ... }  
});  

var talk = new Talk({ speaker: "Paco Camarena", topic: 'Backbone.js'});  

talk.get('topic'); // => 'Backbone.js'

talk.set('topic', "CookieBit"}); 
talk.get('topic'); // => 'CookieBit' 
  
          </code></pre>
          </section>  
          <section>
            <h2>Extend</h2>
             <pre><code contenteditable style="max-height: 600px">
var Talk = Backbone.Model.extend({  
    defaults: {  
      speaker: 'Default speaker',  
      topic: '' 
    },
    initialize: function(){ // Contructor },  
    notifyTopic:function(){ ... }  
});

var Conference = Talk.extend({  
    initialize: function(){ // Contructor },  
    notifySpeaker:function(){ ... }  
});

var conference = new Conference({ speaker: "Héctor Badal", topic: 'Yeepply'}); 
conference.notifyTopic();
conference.notifySpeaker();

          </code></pre>
<p>¿Acceso a <i>super</i>? <strong>NO</strong></p>
          </section>  
          <section>
           <h2>Trabajando con atributos</h2>
          
          <ul>
            <li>get</li>
            <li>set</li>
            <li>has</li>
            <li>unset</li>
            <li><strong>validate</strong></li>
            <li>...</li>
          </ul>
            <pre><code contenteditable style="max-height: 600px">
var Talk = Backbone.Model.extend({  
    validate: function(attrs, options) {
      if(attrs.topic === 'Symbian'){
        return 'Sorry, nobody is interested in it';
      }
    }
});

var talk = new Talk({ speaker: 'Pablo Monterde', topic:'Backbone.js'});
talk.set('topic','Symbian',{validation:true}); 
talk.get('topic'); // => 'Backbone.js'
          </code></pre>
          <p>Cada cambio en un modelo dispara un evento <strong>change</strong></p>
          </section>  
          <section>
           <h2>Estados de un model</h2>
          <ul>
            <li>isNew</li>
            <li>hasChanged</li>
            <li>changedAttributes</li>
            <li>previous</li>
            <li>...</li>
          </ul>
            <pre><code contenteditable style="max-height: 600px">
var talk = new Talk({ speaker: "Paco Camarena", topic: 'CookieBit'});  
talk.set('topic','Backbone.js'); 
var previousTopic = talk.previous('topic'); // => 'CookieBit' 
          </code></pre>
            <blockquote cite="http://backbonejs.org/"> Useful for getting back to a valid state after an error occurs.</blockquote>
          </section>  
          <section>
            <h2>Sincronización y persistencia</h2>
            <h3>RESTful API</h2>
              <ul>
                <li>fetch</li>
                <li>save</li>
                <li>destroy</li>  
                <li>sync</li>
            </ul>
          </section>  
          <section>
            <h2>Traer datos del servidor</h2>
            <h3>fetch</h2>
            <pre><code contenteditable style="max-height: 600px">
var Talk = Backbone.Model.extend({  
    urlRoot:'talks',
});
var talk = new Talk({id:1});
talk.fetch(); // se genera GET /talks/1
          </code></pre>
          </section>    
          <section>
            <h2>Persistencia datos</h2>
            <h3>save - sync</h2>
            <pre><code contenteditable style="max-height: 600px">

var talk = new Talk({speaker: "Pablo Monterde", topic: 'Backbone.js'});
talk.save(); // se genera POST /talks , contenido: {speaker: "Pablo Monterde", topic: 'Backbone.js'};

talk.set('id',1);
talk.save(); // se genera PUT /talks/1 , contenido: {id:1, speaker: "Pablo Monterde", topic: 'Backbone.js,is'};
          </code></pre>
          <div>Se validan los datos antes de enviarlos al server </div>
          <div><strong>.save({wait:true})</strong> no se modifican los atributos hasta que se recibe respuesta del servidor  </div>
          </section>    
          <section>
            <h2>Borrado de datos</h2>
            <h3>destroy</h2>
            <pre><code contenteditable style="max-height: 600px">

talk.destroy(); // se genera DELETE /talks/1 

          </code></pre>
          <p>Trigger evento <i>destroy</i></p>
          </section>    
        </section>  

        <section>

          <section>
            <h1>Collections</h1>
            <ul>
              <li>Conjunto ordenado de modelos </li>
              <li>Modeliza JSON</li>
              <li>Persistencia de conjunto de modelos</li>
              <li>proxy underscore methods</li>
            </ul>
          </section> 
          <section>
            <h2>Creando un Collection</h2>
            <pre><code contenteditable style="max-height: 600px">
var Betabeers = Backbone.Collection.extend({
    model: Talk
});

var talkArray = [{speaker: "Paco Camarena", topic: 'CookieBit'},
                 {speaker: "Héctor Badal", topic: 'Yeepply'},
                 {speaker: "Pablo Monterde", topic: 'Backbone.js'}];

var betabeers = new Betabeers(talkArray);

          </code></pre>
          <div>Solo se asocian a un tipo de model. Colleccions <strong>multimodel</strong> mediante plugins.</div>
          </section> 

          <section>
            <h2>Añadiendo - eliminando Modelos</h2>
            <pre><code contenteditable style="max-height: 700px">
var firstTalk = new Talk({speaker:'Paco Camarena', topic:'CookieBit'});
var secondTalk = new Talk({speaker:'Héctor Badal', topic:'Yeepply'});
var thirdTalk = new Talk({speaker:'Pablo Monterde', topic:'Backbone.js'});

var betabeers = new Betabeers();

betabeers.add(firstTalk);
betabeers.push({speaker: 'Héctor Badal', topic: 'Yeepply'});
betabeers.update(thirdTalk);

betabeers.remove(thirdTalk);
betabeers.shift();
betabeers.pop();

          </code></pre>
          <p>Trigger evento <i>add</i>/<i>remove</i> </p>
          </section> 

          <section>
            <h2>Recuperar - iterar Modelos</h2>
            <pre><code contenteditable style="max-height: 600px">
var betabeers = new Betabeers();

betabeers.get("id-de-modelo");
betabeers.at(1);
betabeers.where({topic:'Backbone.js'});

betabeers.forEach(function(talk){ 
      return talk.get('topic'); 
});
          </code></pre>
          <img src="img/collectionFunctions.png" alt="">
          </section> 
          <section>
          <h1>Sincronización con el servidor</h1>
          <pre><code contenteditable style="max-height: 600px">
var Betabeers = Backbone.Collection.extend({
    model: Talk,
    url: 'talks'
});

var betabeers = new Betabeers();
betabeers.fetch(); // se genera GET /talks

        </code></pre>
          </section> 

      </section>

      <section>
          <section>
            <h1>Views</h1>
            <ul>
              <li>Clases de control que nos ayudarán a representar nuestros modelo</li>
              <li>Escuchar eventos del DOM y Models/Collections</li>
              <li>Representar el estado y los datos al usuario</li>
              <li>Aséptico respecto al motor de plantillas</li>
              <li>Delega la renderización final al desarrollador</li>
            </ul>
          </section> 

          <section>
            <h2>Creando un View</h2>
            <pre><code contenteditable style="max-height: 600px">
var TalkView = Backbone.View.extend({
    tagName: 'li',
    className: 'talkClass',
    attributes: {'style':'display:block'},
    id: 'IamATalk'
});

var talkView = new TalkView();

talkWiew.el; 
// => &lt;li id=&quot;IamATalk&quot; class=&quot;talkClass&quot; style=&quot;display:block&quot; &gt;&lt;/li&gt;
talkWiew.$el;
// => $(talkWiew.el) 
          </code></pre>

          </section> 
          <section>
            <h2>Asociando un View a un elemento del DOM</h2>
            <pre><code contenteditable style="max-height: 600px">
var talkView = new TalkView({
    el:'#firstTalk'
});   
talkView.el; // => &lt;div id=&quot;firstTalk&quot; &gt;&lt;div&gt;
            </code></pre>
          </section>  
          <section>
            <h2>Asociando un modelo</h2>
            <pre><code contenteditable style="max-height: 600px">
var TalkView = Backbone.View.extend({
    initialize: function() {
      this.listenTo(this.model, "change", this.render);
    },
    render: function() {
      ...
    }
}); 

var talkView = new TalkView({
    model:talkModel
});  


            </code></pre>
          </section>  
          <section>
            <h2>Render</h2>
            <pre><code contenteditable style="max-height: 600px">
var TalkView = Backbone.View.extend({
    render: function() {
      this.el.innerHTML = this.model.get('name');  
  
      //Or the jQuery way  
      this.$el.html(this.model.get('name'));  
    }
}); 


            </code></pre>
            <div>Al final... no hay magia...renderizas tu!!!</div>
          </section>  
          <section>
            <h2>Templating</h2>
            <pre><code contenteditable style="max-height: 600px">
var TalkView = Backbone.View.extend({
    template: _.template('&lt;div&gt;&lt;%= topic %&gt;&lt;/div&gt;'),

    render: function() {
      var newHtml: this.template(this.model.toJSON());
      this.$el.html(newHtml);  
    }
}); 
            </code></pre>
            <div>JavaScript templating libraries:</div>
            <ul>
              <li>Twig.js</li>
              <li>Mustache.js</li>
              <li>underscore (default)</li>
              <li>Haml.js</li>
              <li>Eco</li>
            </ul>
          </section>
          <section>
            <h2>User Interaction - Events</h2>
            <pre><code contenteditable style="max-height: 600px">
var TalkView = Backbone.View.extend({
    events: {
      'dblclick'                : 'open',
      'click .reset'            : 'resetTopic',
      'mouseover .title'        : 'showTooltip'
    },
    open: function() {
      this.$el.show('fast');  
    },
    resetTopic: function() {
      this.model.set({topic:''});
    },
    showTooltip: function(){ ... }
}); 
            </code></pre>
           
          </section>  
        </section>  

        <section>
          <section>
            <h1>Router</h1>
            <blockquote cite="http://backbonejs.org/">Backbone.Router provides methods for routing client-side pages, and connecting them to actions and events</blockquote>
            <ul>
              <li>HTML5 History API</li>
              <li>Activa historial del navegador</li>
              <li>Ordenar la aplicación</li>
              <li>Compatible con <i>hash fragments</i></li>
            </ul>
          </section>  

          <section>
            <h2>¿Cómo funciona?</h2>
             <pre><code contenteditable style="max-height: 600px">
var Router = Backbone.Router.extend({
  routes:{                                     
    ""                    : "index",           // / 
    "events"              : "events",          // /events 
    "events/:month"       : "showMonthEvents", // /events/march 
    "events/:month/t:id" : "showMonthTalks"    // /events/march/t5 
  },
  index: function() { /* ... */ },
  events: function(){ /* ... */ },
  showMonthEvents: function(month){ /* ... */ },
  showMonthTalks: function(month,talkId){ /* ... */ },
}); 
            </code></pre>
          </section>
          <section>
            <h1>Activar y navegar</h1>
            <pre><code contenteditable style="max-height: 600px">
var appRouter = new Router();
Backbone.history.start({pushState: true}); 
appRouter.navigate("events", {trigger: true, replace: true});
            </code></pre>
           
          </section>  


        </section>


        <section>
          <h2>Ventajas</h2>
          <ul>
            <li>Aporta herramientas útiles</li>
            <li>No fuerza un motor de plantillas determinado</li>
            <li>Pequeño</li>
            <li>No inyecta lógica en tu HTML</li>
            <li>No hook code en atributos <i>data-</i> o <i>ng-</i></li>
            <li>Restful API</li>
            <li>Libreria, no framework. Compatibilidad</li>
          </ul>
        </section>

        <section>
          <h2>Desventajas</h2>
          <ul>
            <li>Renderizado no automático</li>
            <li>No óptimo para pequeñas aplicaciones</li>
          </ul>
        </section>

        <section>
          <h2>Aprender Backbone.js</h2>
          <ul>
            <li><a href="http://www.symfony.com">Documentación oficial</a></li>
            <li><a href="http://symfony.es/libro/">Libro: Desarrollo web ágil con Backbone.js - Javier Eguiluz</a></li>
            <li><a href="http://www.maestrosdelweb.com/editorial/curso-Backbone.js-introduccion-instalacion/">Curso introducción a Backbone.js - Maestros del web</a></li>
          </ul>
        </section>

        <section>
          <h2>Referencias</h2>
          <ul>
            <li><a href="http://www.symfony.com">Symfony.com</a></li>
            <li><a href="http://fabien.potencier.org/article/49/what-is-Backbone.js">http://fabien.potencier.org/article/49/what-is-Backbone.js</a></li>
            <li><a href="https://speakerdeck.com/betabeers/taller-Backbone.js">https://speakerdeck.com/betabeers/taller-Backbone.js</a></li>
            <li><a href="http://symfony.com/six-good-technical-reasons">http://symfony.com/six-good-technical-reasons</a></li>
          </ul>
        </section>

        <section>
          <h1>¿Preguntas?</h1>
          <ul>
            <li><a href="mailto:@gmail.com">@gmail.com</a></li>
            <li><a href="http://twitter.com/pablomonterdep">@pablomonterdep</a></li>
          </ul>
        </section>

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: false,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-35259405-2']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
  </body>
</html>
